1) Описание проекта:

Интернет-сервис (сайт) для взятия автомобиля на прокат. Можно посмотреть все автомобили, выбрать нужный и узнать его параметры и тарифы. Есть встроенный чат-бот.


2) Реализуемый функционал:

- Сохранение данных в бд через панель админа
- Кнопки сверху для навигации по сайту
- Отображение на главной странице каталога автомобилей
- Сортировка на главной странице по параметрам автомобилей (сортировка на бэкенде и готовый ответ на фронтенд)
- Страница с детальным описанием параметров автомобиля и тарифов
- Встроенный чат-бот, который отвечает на имеющиеся в нём кнопки


3) Архитектура:

Проект состоит из 3-x частей:
- Бэкенд, написан на Django + Django Rest Framework
- Фронтенд, написан на React + React Router
- Чат-бот, написан на PyTelegramBotAPI


Бэкенд:

- Модели для базы данных (реализованы через наследование от от класса Model):

class Mark(models.Model): - модель марки автомобиля (брэнда)
    title - название
    logo  - изображение логотипа

    def __str__ - магический метод, возвращающий название в админ-панели для удобства просмотра содержимого бд

class Car(models.Model): - модель самого автомобиля
    title - полное название автомобиля
    характеристики:
    engine_volume - объём двигателя
    horse_power - количество лошадиных сил
    type_of_engine - тип двигателя (бензин, дизель, электро или иное)
    year_of_release - год выпуска
    new - новый или нет
    tarif1_1 - тариф на 1 день
    tarif2_3 - тариф на 2-3 дня
    tarif4_6 - тариф на 4-6 дней
    tarif7_14 - тариф на 7-14 дней
    tarif15_21 - тариф на 15-21 дней 
    tarif_more - тариф на более дней

    def __str__ - магический метод, возвращающий название в админ-панели для удобства просмотра содержимого бд
        
class Images(models.Model): - модель изображения

Сама идея. У каждой машины есть много изображений. Но есть одно главное (с лицевой стороны полубоком). На главной странице (в каталоге) отображаются не автомобили, а их главные изображения. Это сделано в виду того, что на главной странице мы не отображаем детальную информацию о машине, следовательно нет смысла передавать ненужную информацию в json.

    title - полное название автомобиля
    brand - брэнд автомобиля (нужно для сортировки на главной странице)
    car - привязка каждого изображения к конкретному автомобилю
    main - главное изображение или нет
    image - само изображение

    def __str__ - магический метод, возвращающий название в админ-панели для удобства просмотра содержимого бд

- Так как для создания API я использовал DRF, то понадобились сериалайзеры.
Сериалайзеры (реализованы через наследование от класса ModelSerializer):

class MarkSerializer(serializers.ModelSerializer):
    class Meta:
        model - модель для сериалайзера (в данном случае брэнд)
        fields - поля, которые видны в json

Аналогичные для модели автомобиля и изображения

- Представления тоже на классах. Они передаются в urls с методом as_view() (согласно документации).
Представления:

class ListMark(generics.ListAPIView): - в json-формате выводит списком все брэнды
    queryset - из какого множества объектов берём
    serializer_class - сериалайзер для преобразования в json

class DetailMark(generics.RetrieveAPIView): - возвращает брэнд по id
    queryset
    serializer_class

Аналогично брэнду для автомобиля и изображения

class ListCurrentImages(generics.ListAPIView): - при переходе на страницу с детальным описанием автомобиля, возвращает все изображения, привязанные к данному автомобилю
    serializer_class

    def get_queryset(self): - с помощью этого метода

class ListCurrentCars(generics.ListAPIView): - при сортировке на главной странице по брэндам, возвращает все изображения, относящиеся к данному брэнду
    serializer_class

    def get_queryset(self): - с помощью этого метода

* Не исключены поправки и дополнения к функционалу.


Бд (база данных):

В отладочном режиме используется SQLite3, потом перейду на SQL.


Бот:

Бот полностью сделан на декораторах и функциях.

marks - список всех марок автомобилей. Глобальная переменная.

@bot.message_handler(commands=['start'])
def start(message): - обрабатывает команду старт и возвращает кнопки для навигации ('Перейти на сайт, Марки автомобилей', 'Почему мы?', 'Контакты')

def on_click(message): - обрабатывает нажатие на перечисленные выше кнопки. При нажатии на 'Марки автомобилей' отрисовываются ещё дополнительные 2 кнопки.

@bot.callback_query_handler(func=lambda callback: True)
def callback_message(callback): - обрабатывается нажатие на отрисованные дополнительные кнопки.

@bot.message_handler(func=lambda x: True)
def something(message): - запускает работоспособность кнопок навигации после каждого ответа
    on_click(message) 

* Планируется добавить больше функционала (кнопок) и (м.б.) подключить к бд.


Фронтенд:

Реализован на React (все основные компоненты в виде разметки JSX), React Router (для навигации и url), axios (отправка запросов на бекэнд) и css (дизайн сайта).

* Самая динамическая часть сайта. Постоянно меняется.




